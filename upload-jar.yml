- name: Install boto3 and botocore with pip3 module
    pip:
      name: 
      - boto3
      - botocore
      executable: pip-3.7

- name: This playbook is used to zip and upload the code in the s3 bucket
  vars:
      ansible_python_interpreter: /usr/bin/python3
  hosts: localhost
  connection: local
  gather_facts: false
 
  tasks:
    - name: Copy the compiled jar to the s3 bucket
      aws_s3:
        bucket: "hellotrupti"
        object: "lambda/hello-lambda.jar"
        src: "target/hello-lambda-function.jar"
        mode: put
        encrypt: no
        region: "ap-south-1"
